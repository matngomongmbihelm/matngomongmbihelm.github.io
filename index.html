<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="tw.png" sizes="16x16" type="image/png">
    <link href="style.css" rel="stylesheet">
    <link href="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/group-by-v2/bootstrap-table-group-by.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <title>HUNTERCOMMUNITY DEVICE_ID TRACKING REPORT</title>
  </head>
  <body>
    <div class="container">
      <div id="status"></div>
      <div id="fb-root"></div>
      <div class="card text-center mt-2">
        <h4 class="card-header">HUNTERCOMMUNITY DEVICE_ID TRACKING REPORT</h4>
        <fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
        </fb:login-button>
        <div class="card-body">
             <table class="responsive" id="data_fecth" data-group-by="true" data-group-by-field="pengguna" data-pagination="true" data-search="true" data-cache="false" data-page-size="40">
              <thead>
                <tr>
                  <th data-field="pengguna"><i class="bi bi-person-bounding-box"></i> USER</th>
                  <th data-field="device"><i class="bi bi-laptop"></i> DEVICE ID</th>
                  <th data-field="token"><i class="bi bi-key-fill"></i> KEY</th>
                  <th data-field="tanggal"><i class="bi bi-calendar"></i> DATE</th>
                </tr>
              </thead>
            </table>
        </div>
        <div class="card-footer text-muted">
          READABLE USAGE
        </div>
      </div>
        <script>
          function statusChangeCallback(response) {  // Called with the results from FB.getLoginStatus().
            console.log('statusChangeCallback');
            console.log(response);                   // The current login status of the person.
            if (response.status === 'connected') {   // Logged into your webpage and Facebook.
              testAPI();  
            } else {                                 // Not logged into your webpage or we are unable to tell.
              document.getElementById('status').innerHTML = 'Please log ' +
                'into this webpage.';
            }
          }


          function checkLoginState() {               // Called when a person is finished with the Login Button.
            FB.getLoginStatus(function(response) {   // See the onlogin handler
              statusChangeCallback(response);
            });
          }


          window.fbAsyncInit = function() {
            FB.init({
              appId      : '598819024885180',
              cookie     : true,                     // Enable cookies to allow the server to access the session.
              xfbml      : true,                     // Parse social plugins on this webpage.
              version    : 'v5.0'           // Use this Graph API version for this call.
            });


            FB.getLoginStatus(function(response) {   // Called after the JS SDK has been initialized.
              statusChangeCallback(response);        // Returns the login status.
            });
          };

          function testAPI() {                      // Testing Graph API after login.  See statusChangeCallback() for when this call is made.
            console.log('Welcome!  Fetching your information.... ');
            FB.api('/me', function(response) {
              console.log('Successful login for: ' + response.name);
              document.getElementById('status').innerHTML =
                'Thanks for logging in, ' + response.name + '!';
            });
          }
       </script>
      <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>
      <script src="fetch.js"></script>
      <script src="bundle.js"></script>
      <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/bootstrap-table.min.js"></script>
      <script src="https://unpkg.com/bootstrap-table@1.18.3/dist/extensions/group-by-v2/bootstrap-table-group-by.min.js"></script>
  </body>
</html>
